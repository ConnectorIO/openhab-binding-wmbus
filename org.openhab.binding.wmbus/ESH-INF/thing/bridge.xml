<?xml version="1.0" encoding="UTF-8"?>
<thing:thing-descriptions bindingId="wmbus" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"   xmlns:thing="http://eclipse.org/smarthome/schemas/thing-description/v1.0.0" xsi:schemaLocation="http://eclipse.org/smarthome/schemas/thing-description/v1.0.0 http://eclipse.org/smarthome/schemas/thing-description-1.0.0.xsd">

    <bridge-type id="wmbusbridge">
        <label>WMBus Stick</label>
        <description>The WMBus bridge represents the USB stick used to receive WMBus messages. There are three different sticks supported: Amber Wireless AMB8465-M, Radiocrafts RC1180-MBUS and IMST iM871A-USB</description>

        <config-description>
            <parameter name="stickModel" type="text">
                <description>The stick model used.</description>
                <label>Stick Model</label>
                <required>true</required>
                <options>
                    <option value="amber">Amber Wireless AMB8465-M</option>
                    <option value="rc">Radiocrafts RC1180-MBUS</option>
                    <option value="imst">IMST iM871A-USB</option>
                </options>
            </parameter>
            <parameter name="serialDevice" type="text">
                <context>serial-port</context>
                <label>Serial Port</label>
                <description>The name of the serial port (e.g. /dev/ttyUSB0 or COM5).</description>
                <required>true</required>
            </parameter>
            <parameter name="radioMode" type="text">
                <description>Radio mode to operate the WMBus radio module on.</description>
                <label>Radio Mode</label>
                <options>
                    <option value="S">S (Stationary) - interval</option>
                    <option value="T">T (Transmit) - frequent transmit (e.g. Techem HKV)</option>
                    <option value="C">C (Compact) - frequent transmit, more payload</option>
                </options>
                <required>true</required>
            </parameter>
            <parameter name="encryptionKeys" type="text">
                <description>Encryption Keys in form ID:KEY;ID:KEY all in hex format like given to the jMBus message printer test program.</description>
                <label>Encryption Keys</label>
                <advanced>true</advanced>
            </parameter>
            <parameter name="deviceIDFilter" type="text">
                <description>List of device IDs to filter during receive. If empty, all received devices will be handled, if at least one ID is set, only messages from this device will be handled. Device ID in decumal format as shown in WMBus message prints and given out by the jMBus message printer test program.</description>
                <label>Device Filter</label>
                <advanced>true</advanced>
            </parameter>
        </config-description>
    </bridge-type>
    
    <bridge-type id="wmbusvirtualbridge">
        <label>WMBus Virtual Bridge</label>
        <description>WMBus Virtual Bridge for testing</description>
        <channels>
            <channel id="wmbusvirtualbridge_code" typeId="bytes_code" />
        </channels>
        <config-description>
            <parameter name="bytes" type="text">
                <description>Bytes to decode from WMBus message</description>
                <label>Bytes to decode</label>
                <required>true</required>
            </parameter>
            <parameter name="address" type="text">
                <description>Secondary Address</description>
                <label>Address</label>
                <required>true</required>
            </parameter>
            <parameter name="control_field" type="text">
                <description>control field</description>
                <label>control field</label>
                <required>true</required>
            </parameter>
            <parameter name="rssi" type="text">
                <description>Received_signal_strength_indication</description>
                <label>RSSI</label>
                <required>true</required>
            </parameter>
        </config-description>
        
    </bridge-type>
    
    <channel-type id="bytes_code">
        <item-type>String</item-type>
        <label>Code Bytes</label>
        <description>Code Bytes in HEX</description>
        <category>Text</category>
        <state readOnly="false">
        </state>
    </channel-type>
    
</thing:thing-descriptions>
